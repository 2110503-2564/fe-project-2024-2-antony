{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Gun/Desktop/FE/fe-project-2024-2-antony/src/components/ConfirmPopup.tsx"],"sourcesContent":["export default function ConfirmPopup({ onClose, onDelete, title }: { onClose: () => void, onDelete: () => void, title: string }){\r\n    return (\r\n    <div className=\"bg-white shadow-lg rounded-lg p-8 w-full md:max-w-xl max-w-xs\">\r\n        <div className=\"mb-4 w-full\">\r\n            <label className=\"block text-lg font-semibold mb-2 w-full text-center\">\r\n            {title}\r\n            </label>\r\n        </div>\r\n\r\n        <div className=\"flex gap-4\">\r\n        <button\r\n            onClick={onClose}\r\n            className=\"w-full bg-gray-800 text-white py-3 rounded-lg font-semibold text-lg hover:bg-gray-700 hover:cursor-pointer transition\"\r\n        >\r\n            Cancel\r\n        </button>\r\n        <button\r\n            onClick={onDelete}\r\n            className=\"w-full bg-red-600 text-white py-3 rounded-lg font-semibold text-lg hover:bg-red-500 hover:cursor-pointer transition\"\r\n        >\r\n            Delete\r\n        </button>\r\n        </div>\r\n    </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAe,SAAS,aAAa,EAAE,OAAO,EAAE,QAAQ,EAAE,KAAK,EAAgE;IAC3H,qBACA,8OAAC;QAAI,WAAU;;0BACX,8OAAC;gBAAI,WAAU;0BACX,cAAA,8OAAC;oBAAM,WAAU;8BAChB;;;;;;;;;;;0BAIL,8OAAC;gBAAI,WAAU;;kCACf,8OAAC;wBACG,SAAS;wBACT,WAAU;kCACb;;;;;;kCAGD,8OAAC;wBACG,SAAS;wBACT,WAAU;kCACb;;;;;;;;;;;;;;;;;;AAMT","debugId":null}},
    {"offset": {"line": 71, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Gun/Desktop/FE/fe-project-2024-2-antony/src/libs/getShops.tsx"],"sourcesContent":["import { MassageJson } from \"../../interface\";\r\n\r\nconst getShops = async (): Promise<MassageJson> => {\r\n  const response = await fetch(\"https://antony-massage-backend-production.up.railway.app/api/v1/massage-shops\");\r\n  if (!response.ok) {\r\n    throw Error(\"Failed to fetch shops\");\r\n  }\r\n  const jsonfile = await response.json();\r\n  return jsonfile;\r\n};\r\n\r\nexport default getShops;\r\n"],"names":[],"mappings":";;;AAEA,MAAM,WAAW;IACf,MAAM,WAAW,MAAM,MAAM;IAC7B,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,MAAM;IACd;IACA,MAAM,WAAW,MAAM,SAAS,IAAI;IACpC,OAAO;AACT;uCAEe","debugId":null}},
    {"offset": {"line": 89, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Gun/Desktop/FE/fe-project-2024-2-antony/src/components/ShopItem.tsx"],"sourcesContent":["\"use client\"\r\nimport deleteShop from \"@/libs/deleteShop\";\r\nimport { MassageItem } from \"../../interface\";\r\nimport Link from \"next/link\";\r\nimport { useEffect, useState } from \"react\";\r\nexport default function ShopItem({ shop, showDeletePopup, isAdmin }: { shop: MassageItem, showDeletePopup: Function, isAdmin: Boolean }) {\r\n\r\n    return (\r\n        <div className=\"flex items-center justify-between p-4 bg-gray-100 rounded-lg shadow-sm\">\r\n            <div>\r\n                <h2 className=\"text-lg font-semibold\">{shop.name}</h2>\r\n                <p className=\"text-gray-500\">{shop.address}</p>\r\n                <p className=\"text-gray-500\">Tel: {shop.tel}</p>\r\n                <p className=\"text-gray-500\">Open: {shop.openTime} - {shop.closeTime}</p>\r\n            </div>\r\n            {\r\n                !isAdmin ? (\r\n                <Link href={`/reservation?shopId=${shop._id}`}>\r\n                    <button className=\"bg-red-600 hover:bg-red-500 text-white px-4 py-2 rounded-lg hover:cursor-pointer transition\">Reserve</button>\r\n                </Link>) : (\r\n                <button onClick={() => showDeletePopup(shop._id)}\r\n                    className=\"bg-red-600 hover:bg-red-500 text-white px-4 py-2 rounded-lg hover:cursor-pointer transition\">\r\n                    Delete\r\n                </button>\r\n                )\r\n            }\r\n        </div>\r\n    );\r\n}"],"names":[],"mappings":";;;;AAGA;AAHA;;;AAKe,SAAS,SAAS,EAAE,IAAI,EAAE,eAAe,EAAE,OAAO,EAAsE;IAEnI,qBACI,8OAAC;QAAI,WAAU;;0BACX,8OAAC;;kCACG,8OAAC;wBAAG,WAAU;kCAAyB,KAAK,IAAI;;;;;;kCAChD,8OAAC;wBAAE,WAAU;kCAAiB,KAAK,OAAO;;;;;;kCAC1C,8OAAC;wBAAE,WAAU;;4BAAgB;4BAAM,KAAK,GAAG;;;;;;;kCAC3C,8OAAC;wBAAE,WAAU;;4BAAgB;4BAAO,KAAK,QAAQ;4BAAC;4BAAI,KAAK,SAAS;;;;;;;;;;;;;YAGpE,CAAC,wBACD,8OAAC,4JAAA,CAAA,UAAI;gBAAC,MAAM,CAAC,oBAAoB,EAAE,KAAK,GAAG,EAAE;0BACzC,cAAA,8OAAC;oBAAO,WAAU;8BAA8F;;;;;;;;;;qCAEpH,8OAAC;gBAAO,SAAS,IAAM,gBAAgB,KAAK,GAAG;gBAC3C,WAAU;0BAA8F;;;;;;;;;;;;AAO5H","debugId":null}},
    {"offset": {"line": 185, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Gun/Desktop/FE/fe-project-2024-2-antony/src/libs/deleteShop.tsx"],"sourcesContent":["export default async function deleteShop(token: string, shopId: string){\r\n    const url = `https://antony-massage-backend-production.up.railway.app/api/v1/massage-shops/${shopId}`;\r\n    \r\n    try {\r\n        const response = await fetch(url, {\r\n            method: 'DELETE',\r\n            headers: {\r\n                'Authorization': `Bearer ${token}`,\r\n                'Content-Type': 'application/json',\r\n            },\r\n        });\r\n        if (!response.ok) {\r\n            throw new Error(`Error: ${response.status} - ${response.statusText}`);\r\n        }\r\n\r\n        console.log('Shop deleted successfully');\r\n    } catch (error) {\r\n        console.error('Failed to delete shop:', error);\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;AAAe,eAAe,WAAW,KAAa,EAAE,MAAc;IAClE,MAAM,MAAM,CAAC,8EAA8E,EAAE,QAAQ;IAErG,IAAI;QACA,MAAM,WAAW,MAAM,MAAM,KAAK;YAC9B,QAAQ;YACR,SAAS;gBACL,iBAAiB,CAAC,OAAO,EAAE,OAAO;gBAClC,gBAAgB;YACpB;QACJ;QACA,IAAI,CAAC,SAAS,EAAE,EAAE;YACd,MAAM,IAAI,MAAM,CAAC,OAAO,EAAE,SAAS,MAAM,CAAC,GAAG,EAAE,SAAS,UAAU,EAAE;QACxE;QAEA,QAAQ,GAAG,CAAC;IAChB,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,0BAA0B;IAC5C;AACJ","debugId":null}},
    {"offset": {"line": 212, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Gun/Desktop/FE/fe-project-2024-2-antony/src/components/TimeUI.tsx"],"sourcesContent":["import { LocalizationProvider } from '@mui/x-date-pickers';\r\nimport { AdapterDateFns } from '@mui/x-date-pickers/AdapterDateFns';\r\nimport { AdapterDayjs } from \"@mui/x-date-pickers/AdapterDayjs\";\r\nimport { DatePicker } from '@mui/x-date-pickers/DatePicker';\r\nimport dayjs from 'dayjs';\r\nimport { TimePicker } from '@mui/x-date-pickers';\r\n\r\nexport default function TimeUI({\r\n  selectedDate,\r\n  setSelectedDate,\r\n}: {\r\n  selectedDate: dayjs.Dayjs | null;\r\n  setSelectedDate: (date: dayjs.Dayjs | null) => void;\r\n}) {\r\n\r\n  return (\r\n    <LocalizationProvider dateAdapter={AdapterDayjs}>\r\n      <div className=\"w-full\">\r\n        <TimePicker\r\n          label=\"\"\r\n          value={selectedDate}\r\n          onChange={(newDate) => setSelectedDate(newDate)}\r\n          slotProps={{\r\n            textField: {\r\n              sx: {\r\n                width: \"100%\",\r\n                backgroundColor: \"#F3F4F6\", // Tailwind bg-gray-100\r\n                borderRadius: \"8px\", // Tailwind rounded-lg\r\n                color: \"#374151\", // Tailwind text-gray-700\r\n                \"& .MuiOutlinedInput-root\": {\r\n                  \"& fieldset\": { border: \"none\" }, // Remove border\r\n                },\r\n                \"& .MuiInputBase-input\": {\r\n                  color: \"#374151\", // Tailwind text-gray-700\r\n                  fontSize: \"16px\",\r\n                  height: \"10px\", // Set input height\r\n                },\r\n                \"& .MuiSvgIcon-root\": {\r\n                  color: \"#374151\", // Tailwind text-gray-700 for the time icon\r\n                },\r\n              },\r\n            },\r\n          }}\r\n        />\r\n      </div>\r\n    </LocalizationProvider>\r\n  );\r\n};\r\n\r\n\r\n"],"names":[],"mappings":";;;;AAAA;AAEA;AAGA;;;;;AAEe,SAAS,OAAO,EAC7B,YAAY,EACZ,eAAe,EAIhB;IAEC,qBACE,8OAAC,6LAAA,CAAA,uBAAoB;QAAC,aAAa,6KAAA,CAAA,eAAY;kBAC7C,cAAA,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC,yKAAA,CAAA,aAAU;gBACT,OAAM;gBACN,OAAO;gBACP,UAAU,CAAC,UAAY,gBAAgB;gBACvC,WAAW;oBACT,WAAW;wBACT,IAAI;4BACF,OAAO;4BACP,iBAAiB;4BACjB,cAAc;4BACd,OAAO;4BACP,4BAA4B;gCAC1B,cAAc;oCAAE,QAAQ;gCAAO;4BACjC;4BACA,yBAAyB;gCACvB,OAAO;gCACP,UAAU;gCACV,QAAQ;4BACV;4BACA,sBAAsB;gCACpB,OAAO;4BACT;wBACF;oBACF;gBACF;;;;;;;;;;;;;;;;AAKV","debugId":null}},
    {"offset": {"line": 277, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Gun/Desktop/FE/fe-project-2024-2-antony/src/components/CreateShopPopup.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport DateReserve from \"@/components/DateReserve\";\r\nimport getShops from \"@/libs/getShops\";\r\nimport { MassageItem } from \"../../interface\";\r\nimport dayjs, { Dayjs } from \"dayjs\";\r\nimport { TimePicker } from \"@mui/x-date-pickers\";\r\nimport TextField from \"@mui/material/TextField\";\r\nimport TimeUI from \"./TimeUI\";\r\n\r\nexport default function CreateShopPopup({\r\n  onClose,\r\n  onCreate,\r\n}: {\r\n  onClose: () => void,\r\n  onCreate: (name: string, \r\n    address: string, \r\n    tel: string, \r\n    openTime: string, \r\n    closeTime: string) => void,\r\n}) {\r\n  const router = useRouter();\r\n  const [name, setName] = useState<string>(\"\"); \r\n  const [address, setAddress] = useState<string>(\"\"); \r\n  const [tel, setTel] = useState<string>(\"\"); \r\n  const [openTime, setOpenTime] = useState<Dayjs | null>(dayjs());\r\n  const [closeTime, setCloseTime] = useState<Dayjs | null>(dayjs());\r\n\r\n  useEffect(() => {\r\n    const token = localStorage.getItem(\"token\");\r\n    if (!token) {\r\n      router.push(\"/login\");\r\n      return;\r\n    }\r\n  }, [router]);\r\n\r\n  const handleSubmit = () => {\r\n    if (!name || !address || !tel || !openTime || !closeTime) {\r\n      alert(\"Please fill in all fields.\");\r\n      return;\r\n    }\r\n\r\n    onCreate(\r\n      name,\r\n      address,\r\n      tel,\r\n      dayjs(openTime, \"HH:mm\").format(\"hh:mm A\"),\r\n      dayjs(closeTime, \"HH:mm\").format(\"hh:mm A\"),\r\n    );\r\n    \r\n    \r\n    setName(\"\");\r\n    setAddress(\"\");\r\n    setOpenTime(dayjs());\r\n    setCloseTime(dayjs());\r\n    onClose();\r\n  };\r\n  \r\n\r\n  return (\r\n    <div className=\"bg-white shadow-lg rounded-lg p-8 w-full md:max-w-xl max-w-xs\">\r\n      <h2 className=\"text-xl font-semibold mb-4 text-center\">Add massage shop</h2>\r\n\r\n      <div className=\"mb-4\">\r\n        <label className=\"block text-lg font-semibold mb-2\">Name</label>\r\n        <input\r\n          type=\"text\"\r\n          className=\"w-full rounded-lg p-3 bg-gray-100 text-gray-700\"\r\n          value={name}\r\n          placeholder=\"Enter shop name\"\r\n          onChange={(e) => setName(e.target.value)}\r\n        />\r\n      </div>\r\n\r\n      <div className=\"mb-4\">\r\n        <label className=\"block text-lg font-semibold mb-2\">Address</label>\r\n        <input\r\n          type=\"text\"\r\n          className=\"w-full rounded-lg p-3 bg-gray-100 text-gray-700\"\r\n          value={address}\r\n          placeholder=\"Enter shop Address\"\r\n          onChange={(e) => setAddress(e.target.value)}\r\n        />\r\n      </div>\r\n\r\n      <div className=\"mb-4\">\r\n        <label className=\"block text-lg font-semibold mb-2\">Telephone</label>\r\n        <input\r\n          type=\"text\"\r\n          className=\"w-full rounded-lg p-3 bg-gray-100 text-gray-700\"\r\n          value={tel}\r\n          placeholder=\"Enter shop telephone number\"\r\n          onChange={(e) => setTel(e.target.value)}\r\n        />\r\n      </div>\r\n\r\n      <div className=\"mb-4\">\r\n        <label className=\"block text-lg font-semibold mb-2\">Open time</label>\r\n        <TimeUI selectedDate={openTime} setSelectedDate={setOpenTime} />\r\n      </div>\r\n\r\n      <div className=\"mb-4\">\r\n        <label className=\"block text-lg font-semibold mb-2\">Close time</label>\r\n        <TimeUI selectedDate={closeTime} setSelectedDate={setCloseTime} />\r\n      </div>\r\n\r\n      <div className=\"flex gap-4\">\r\n        <button\r\n          onClick={onClose}\r\n          className=\"w-full bg-gray-800 text-white py-3 rounded-lg font-semibold text-lg hover:bg-gray-700 hover:cursor-pointer transition\"\r\n        >\r\n          Cancel\r\n        </button>\r\n        <button\r\n          onClick={handleSubmit}\r\n          className=\"w-full bg-green-600 text-white py-3 rounded-lg font-semibold text-lg hover:bg-green-500 hover:cursor-pointer transition\"\r\n        >\r\n          Add\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AAIA;AAGA;AAVA;;;;;;AAYe,SAAS,gBAAgB,EACtC,OAAO,EACP,QAAQ,EAQT;IACC,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IACvB,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAU;IACzC,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAU;IAC/C,MAAM,CAAC,KAAK,OAAO,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAU;IACvC,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAgB,CAAA,GAAA,qIAAA,CAAA,UAAK,AAAD;IAC3D,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAgB,CAAA,GAAA,qIAAA,CAAA,UAAK,AAAD;IAE7D,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,QAAQ,aAAa,OAAO,CAAC;QACnC,IAAI,CAAC,OAAO;YACV,OAAO,IAAI,CAAC;YACZ;QACF;IACF,GAAG;QAAC;KAAO;IAEX,MAAM,eAAe;QACnB,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,OAAO,CAAC,YAAY,CAAC,WAAW;YACxD,MAAM;YACN;QACF;QAEA,SACE,MACA,SACA,KACA,CAAA,GAAA,qIAAA,CAAA,UAAK,AAAD,EAAE,UAAU,SAAS,MAAM,CAAC,YAChC,CAAA,GAAA,qIAAA,CAAA,UAAK,AAAD,EAAE,WAAW,SAAS,MAAM,CAAC;QAInC,QAAQ;QACR,WAAW;QACX,YAAY,CAAA,GAAA,qIAAA,CAAA,UAAK,AAAD;QAChB,aAAa,CAAA,GAAA,qIAAA,CAAA,UAAK,AAAD;QACjB;IACF;IAGA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAG,WAAU;0BAAyC;;;;;;0BAEvD,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAM,WAAU;kCAAmC;;;;;;kCACpD,8OAAC;wBACC,MAAK;wBACL,WAAU;wBACV,OAAO;wBACP,aAAY;wBACZ,UAAU,CAAC,IAAM,QAAQ,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;;0BAI3C,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAM,WAAU;kCAAmC;;;;;;kCACpD,8OAAC;wBACC,MAAK;wBACL,WAAU;wBACV,OAAO;wBACP,aAAY;wBACZ,UAAU,CAAC,IAAM,WAAW,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;;0BAI9C,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAM,WAAU;kCAAmC;;;;;;kCACpD,8OAAC;wBACC,MAAK;wBACL,WAAU;wBACV,OAAO;wBACP,aAAY;wBACZ,UAAU,CAAC,IAAM,OAAO,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;;0BAI1C,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAM,WAAU;kCAAmC;;;;;;kCACpD,8OAAC,4HAAA,CAAA,UAAM;wBAAC,cAAc;wBAAU,iBAAiB;;;;;;;;;;;;0BAGnD,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAM,WAAU;kCAAmC;;;;;;kCACpD,8OAAC,4HAAA,CAAA,UAAM;wBAAC,cAAc;wBAAW,iBAAiB;;;;;;;;;;;;0BAGpD,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBACC,SAAS;wBACT,WAAU;kCACX;;;;;;kCAGD,8OAAC;wBACC,SAAS;wBACT,WAAU;kCACX;;;;;;;;;;;;;;;;;;AAMT","debugId":null}},
    {"offset": {"line": 504, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Gun/Desktop/FE/fe-project-2024-2-antony/src/libs/createShop.tsx"],"sourcesContent":["export default async function createShop(\r\n    token: string, \r\n    name: string, \r\n    address: string, \r\n    tel: string, \r\n    openTime: string, \r\n    closeTime: string\r\n) {\r\n    try {\r\n        // console.log(\"Creating Shop with data:\");\r\n        // console.log(\"Token:\", token);\r\n        // console.log(\"Name:\", name);\r\n        // console.log(\"Address:\", address);\r\n        // console.log(\"Tel:\", tel);\r\n        // console.log(\"Open Time:\", openTime);\r\n        // console.log(\"Close Time:\", closeTime);\r\n\r\n        const response = await fetch(\"https://antony-massage-backend-production.up.railway.app/api/v1/massage-shops\", {\r\n            method: 'POST',\r\n            headers: {\r\n                'Authorization': `Bearer ${token}`,\r\n                'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify({\r\n                name: name,\r\n                address: address,\r\n                tel: tel,\r\n                openTime: openTime,\r\n                closeTime: closeTime,\r\n            }),\r\n        });\r\n        const resText = await response.text();\r\n        if (!response.ok) {\r\n            throw new Error(`Error: ${response.status} - ${response.statusText}`);\r\n        }\r\n        console.log('Shop created successfully');\r\n        return JSON.parse(resText);\r\n    } catch (error) {\r\n        console.error('Failed to create shop:', error);\r\n        throw error;\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;AAAe,eAAe,WAC1B,KAAa,EACb,IAAY,EACZ,OAAe,EACf,GAAW,EACX,QAAgB,EAChB,SAAiB;IAEjB,IAAI;QACA,2CAA2C;QAC3C,gCAAgC;QAChC,8BAA8B;QAC9B,oCAAoC;QACpC,4BAA4B;QAC5B,uCAAuC;QACvC,yCAAyC;QAEzC,MAAM,WAAW,MAAM,MAAM,iFAAiF;YAC1G,QAAQ;YACR,SAAS;gBACL,iBAAiB,CAAC,OAAO,EAAE,OAAO;gBAClC,gBAAgB;YACpB;YACA,MAAM,KAAK,SAAS,CAAC;gBACjB,MAAM;gBACN,SAAS;gBACT,KAAK;gBACL,UAAU;gBACV,WAAW;YACf;QACJ;QACA,MAAM,UAAU,MAAM,SAAS,IAAI;QACnC,IAAI,CAAC,SAAS,EAAE,EAAE;YACd,MAAM,IAAI,MAAM,CAAC,OAAO,EAAE,SAAS,MAAM,CAAC,GAAG,EAAE,SAAS,UAAU,EAAE;QACxE;QACA,QAAQ,GAAG,CAAC;QACZ,OAAO,KAAK,KAAK,CAAC;IACtB,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,0BAA0B;QACxC,MAAM;IACV;AACJ","debugId":null}},
    {"offset": {"line": 547, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Gun/Desktop/FE/fe-project-2024-2-antony/src/app/%28page%29/massageshop/page.tsx"],"sourcesContent":["\"use client\"\r\nimport { useState, useEffect } from \"react\";\r\nimport CircularProgress from \"@mui/material/CircularProgress\";\r\nimport ConfirmPopup from \"@/components/ConfirmPopup\";\r\nimport { MassageJson } from \"../../../../interface\";\r\nimport getShops from \"@/libs/getShops\";\r\nimport ShopItem from \"@/components/ShopItem\";\r\nimport deleteShop from \"@/libs/deleteShop\";\r\nimport getReservations from \"@/libs/getReservations\";\r\nimport CreateShopPopup from \"@/components/CreateShopPopup\";\r\nimport createShop from \"@/libs/createShop\";\r\n\r\nexport default function massageShopPage() {\r\n    const [shops, setShops] = useState<MassageJson | null>(null);\r\n    const [selecting2Delete, setSelecting2Delete] = useState<string | null>(null);\r\n    const [loading, setLoading] = useState(true);\r\n    const [showDelete, setShowDelete] = useState<Boolean>(false);\r\n    const [showAddShop, setShowAddShop] = useState<Boolean>(false);\r\n    const [isAdmin, setIsAdmin] = useState(false);\r\n    \r\n    const checkAdmin = (): boolean => {\r\n    try {\r\n        const userString = localStorage.getItem(\"user\");\r\n        if (userString) {\r\n        const user = JSON.parse(userString);\r\n        return user.role === \"admin\";\r\n        }\r\n    } catch (error) {\r\n        console.error(\"Error parsing user data:\", error);\r\n    }\r\n    return false;\r\n    };\r\n\r\n    const handleShowDelete = (id:string) => {\r\n        setShowDelete(true);\r\n        setSelecting2Delete(id);\r\n    }\r\n\r\n    const fetchShops = async () => {\r\n        try {\r\n            const shopsData: MassageJson = await getShops();\r\n            setShops(shopsData);\r\n        } \r\n        catch (error) {\r\n            console.error(\"Error fetching shops:\", error);\r\n        }\r\n        finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        setIsAdmin(checkAdmin);\r\n        fetchShops();\r\n    }, []);\r\n\r\n    const handleDelete = async () => {\r\n        if(selecting2Delete != null){\r\n            try {\r\n            const token = localStorage.getItem(\"token\");\r\n            if(token){\r\n                await deleteShop(token, selecting2Delete);\r\n            }\r\n            setShowDelete(false);\r\n            setSelecting2Delete(null);\r\n            const shopsData = await getShops();\r\n            setShops(shopsData);\r\n            alert(\"Delete shop successful!\");\r\n            } catch (error) {\r\n            console.error(\"Error deleting shop:\", error);\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleAdd = async (\r\n        name: string, \r\n        address: string, \r\n        tel: string, \r\n        openTime: string, \r\n        closeTime: string\r\n    ) => {\r\n        try {\r\n            const token = localStorage.getItem(\"token\");\r\n            if(token){\r\n                const data = await createShop(token, name, address, tel, openTime, closeTime);\r\n                if(data){\r\n                    alert(\"Shop added successful!\");\r\n                    setShowAddShop(false);\r\n                    fetchShops()\r\n                }\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Error to add shop:\", error);\r\n        }\r\n    };\r\n    \r\n    const handleCloseDelete = () => {\r\n        setShowDelete(false);\r\n        setSelecting2Delete(null);\r\n    };\r\n    const handleCloseAdd = () => {\r\n        setShowAddShop(false);\r\n    };\r\n    \r\n    if (loading) {\r\n        return (\r\n        <div className=\"flex flex-col items-center justify-center h-screen space-y-4\">\r\n            <CircularProgress sx={{ color: \"rgb(220, 38, 38)\" }} size={60} thickness={5} />\r\n            <p className=\"text-lg font-semibold text-gray-600\">Loading...</p>\r\n        </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"flex flex-col items-center p-10 w-full pt-20 md:pt-10\">\r\n                <div className=\"w-full max-w-4xl space-y-4 mt-16\">\r\n                    <div className=\"flex flex-row space-x-4\">\r\n                        {isAdmin && (\r\n                            <button onClick={()=>{setShowAddShop(true)}} className=\"w-full bg-gray-800 text-white py-3 rounded-lg font-semibold text-lg hover:bg-gray-700 hover:cursor-pointer transition\">\r\n                                Add Massage shop\r\n                            </button>\r\n                        )}\r\n                    </div>\r\n                    {shops ? (\r\n                        shops.data.map((shop) => <ShopItem key={shop._id} shop={shop} showDeletePopup={(e:string)=>{handleShowDelete(e)}} isAdmin={isAdmin}/>)\r\n                    ) : (\r\n                        <p className=\"text-gray-500\">Loading shops...</p>\r\n                    )}\r\n                </div>\r\n                \r\n                \r\n                {showDelete && (\r\n                <div className=\"fixed inset-0 flex items-center justify-center bg-[rgba(0,0,0,0.5)]\">\r\n                    <ConfirmPopup onClose={handleCloseDelete} onDelete={handleDelete} title={\"Are you sure you want to delete this shop?\"}/>\r\n                    {/* <p>{selecting2Delete}</p> */}\r\n                </div>\r\n                )}\r\n\r\n                {showAddShop && (\r\n                <div className=\"fixed inset-0 flex items-center justify-center bg-[rgba(0,0,0,0.5)]\">\r\n                    {/* <ConfirmPopup onClose={handleCloseDelete} onDelete={handleDelete} title={\"Are you sure you want to delete this shop?\"}/> */}\r\n                    {/* <p>{selecting2Delete}</p> */}\r\n                    <CreateShopPopup onClose={handleCloseAdd} onCreate={handleAdd}/>\r\n                </div>\r\n                )}\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}