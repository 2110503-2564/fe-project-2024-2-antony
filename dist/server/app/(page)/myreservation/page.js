(()=>{var e={};e.id=786,e.ids=[786],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},7527:(e,t,r)=>{"use strict";r.d(t,{default:()=>s});let s=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\Gun\\\\Desktop\\\\FE\\\\fe-project-2024-2-antony\\\\src\\\\components\\\\Menu.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\Gun\\Desktop\\FE\\fe-project-2024-2-antony\\src\\components\\Menu.tsx","default")},10445:(e,t,r)=>{Promise.resolve().then(r.bind(r,36017))},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},22332:(e,t,r)=>{"use strict";r.d(t,{default:()=>b});var s=r(60687),n=r(43210),o=r(85814),a=r.n(o),i=r(16189),l=r(32192),d=r(22982),c=r(96474),u=r(40228),p=r(58869),h=r(40083),x=r(47367);function m({setLogin:e}){let[t,r]=(0,n.useState)(!1),[o,m]=(0,n.useState)(!1),v=(0,x.A)(),b=(0,i.usePathname)();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"fixed bottom-0 w-full bg-white border-t border-gray-200 py-2 px-4 flex justify-between md:hidden",children:[(0,s.jsx)(g,{href:"/",pathname:b,icon:l.A,label:"Home"}),(0,s.jsx)(g,{href:"/massageshop",pathname:b,icon:d.A,label:"Shops"}),(0,s.jsx)("div",{className:"relative -top-6",children:(0,s.jsx)(a(),{href:"/reservation",children:(0,s.jsx)("button",{className:"w-16 h-16 rounded-2xl bg-red-600 text-white flex items-center justify-center shadow-lg",children:(0,s.jsx)(c.A,{size:28})})})}),(0,s.jsx)(g,{href:"/myreservation",pathname:b,icon:u.A,label:"My reserve"}),(0,s.jsx)(g,{href:"/profile",pathname:b,icon:p.A,label:"Profile"})]}),(0,s.jsxs)("div",{className:"fixed w-70 h-screen bg-white border-gray-200 border-r pt-22 md:flex flex-col hidden",children:[(0,s.jsx)("div",{className:"px-4 py-2",children:(0,s.jsx)(a(),{href:"/reservation",children:(0,s.jsxs)("button",{className:"hover:cursor-pointer w-full p-3 text-white bg-red-600 border rounded-lg hover:bg-red-500 flex items-center gap-2 transition",children:[(0,s.jsx)(c.A,{size:20}),(0,s.jsx)("span",{children:"Make Reservation"})]})})}),(0,s.jsxs)("nav",{className:"flex-1 px-4 py-2 space-y-2",children:[(0,s.jsx)(f,{href:"/",pathname:b,icon:l.A,label:"Home"}),(0,s.jsx)(f,{href:"/massageshop",pathname:b,icon:d.A,label:"Massage shops"}),(0,s.jsx)(f,{href:"/myreservation",pathname:b,icon:u.A,label:o?"All reservations":"My reservations"}),(0,s.jsx)(f,{href:"/profile",pathname:b,icon:p.A,label:"Profile"})]}),t&&(0,s.jsx)("div",{className:"px-4 py-2 pb-4",children:(0,s.jsxs)("button",{onClick:()=>{v(()=>r(!1)),e(!1)},className:"px-16 w-full flex items-center justify-between p-3 border border-red-600 text-red-600 rounded-lg hover:bg-red-100 hover:cursor-pointer transition-colors",children:[(0,s.jsx)("span",{children:"Logout"}),(0,s.jsx)(h.A,{size:18})]})})]})]})}function f({href:e,pathname:t,icon:r,label:n}){let o=t===e;return(0,s.jsxs)(a(),{href:e,className:`flex items-center gap-3 p-3 rounded-lg transition-colors ${o?"bg-gray-100 text-red-600":"text-gray-700 hover:text-gray-950 hover:bg-gray-100"}`,children:[(0,s.jsx)(r,{size:20}),n]})}function g({href:e,pathname:t,icon:r,label:n}){let o=t===e;return(0,s.jsxs)(a(),{href:e,className:`flex flex-col items-center text-xs transition-colors ${o?"text-red-600":"text-gray-500 hover:text-gray-900"}`,children:[(0,s.jsx)(r,{size:24}),n]})}function v({isLogin:e}){let[t,r]=(0,n.useState)(null),[o,l]=(0,n.useState)(!1),d=(0,i.useRouter)(),c=(0,i.usePathname)(),u=()=>({"/":"Home","/massageshop":"Massage Shops","/reservation":"Make Reservation","/myreservation":`${o?"All reservations":"My reservations"}`,"/profile":"Profile"})[c]||"";return(0,s.jsxs)("div",{className:"fixed top-0 left-0 w-full flex items-center py-4 bg-white border-b border-gray-200 md:h-[80px] flex-col md:flex-row space-y-5 md:space-y-0",children:[(0,s.jsxs)(a(),{href:"/",className:"text-4xl font-bold w-72 text-center flex-shrink-0",children:[(0,s.jsx)("span",{className:"text-red-600",children:"Antony"})," Massage"]}),(0,s.jsxs)("div",{className:"w-full px-6 flex justify-between items-center",children:[(0,s.jsx)("h1",{className:"text-lg text-red-600 font-semibold ",children:u()}),(0,s.jsx)("div",{className:"text-gray-700 text-lg ",children:e?"Profile"!=u()?`Hello, ${t}`:null:(0,s.jsx)("button",{onClick:()=>d.push("/login"),className:"bg-red-600 hover:bg-red-500 text-white px-6 py-2 rounded-lg hover:cursor-pointer font-semibold",children:"Login"})})]})]})}function b(){let[e,t]=(0,n.useState)(!1);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m,{setLogin:function(e){t(e)}}),(0,s.jsx)(v,{isLogin:e})]})}},27418:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var s=r(60687),n=r(81158),o=r(29956),a=r(80748);function i({selectedDate:e,setSelectedDate:t}){return(0,s.jsx)(o.$,{dateAdapter:a.R,children:(0,s.jsx)("div",{className:"w-full",children:(0,s.jsx)(n.l,{className:"w-full bg-gray-100",value:e,onChange:e=>t(e),slotProps:{textField:{sx:{width:"100%",backgroundColor:"#F3F4F6",borderRadius:"8px",color:"#374151","& .MuiOutlinedInput-root":{"& fieldset":{border:"none"}},"& .MuiInputBase-input":{color:"#374151",fontSize:"16px",height:"10px"},"& .MuiSvgIcon-root":{color:"#374151"}}}}})})})}},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},36017:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>f});var s=r(60687),n=r(43210),o=r(16189);function a({reserve:e,onEdit:t,onDelete:r,isAdmin:n}){return(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-100 rounded-lg shadow-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-lg font-semibold",children:e.massageShop.name}),n&&(0,s.jsxs)("p",{className:"text-gray-500",children:["Reserver ID: ",e.user]}),(0,s.jsx)("p",{className:"text-gray-500",children:new Date(e.reserveDate).toLocaleDateString("en-GB",{year:"numeric",month:"long",day:"numeric"})})]}),(0,s.jsxs)("div",{className:"flex space-x-2 md:flex-row flex-col space-y-2 md:space-y-0",children:[(0,s.jsx)("button",{className:"bg-gray-800 hover:bg-gray-700 hover:cursor-pointer text-white px-4 py-2 rounded-lg w-20",onClick:t,children:"Edit"}),(0,s.jsx)("button",{className:"bg-red-600 hover:bg-red-500 hover:cursor-pointer text-white px-4 py-2 rounded-lg w-20",onClick:r,children:"Delete"})]})]})}async function i(){try{let e=localStorage.getItem("token");if(!e)throw Error("No token found");let t=await fetch("https://antony-massage-backend-production.up.railway.app/api/v1/reservations",{headers:{Authorization:`Bearer ${e}`}}),r=await t.json();if(!t.ok)throw Error(`Failed to fetch reservations: ${r.message||"Unknown error"}`);return r.data}catch(e){console.error("Error during fetching reservations:",e)}}async function l(e,t){try{if(!t){alert("You need to be logged in to delete a reservation.");return}let r=await fetch(`https://antony-massage-backend-production.up.railway.app/api/v1/reservations/${e}`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`}}),s=await r.text();if(!r.ok)throw console.error("API Error:",s),Error("Delete reservation failed");return JSON.parse(s)}catch(e){throw e}}var d=r(27418);function c({reservationId:e,reservationShopId:t,reservationDate:r,onClose:a,onUpdate:i}){let[l,c]=(0,n.useState)([]),[u,p]=(0,n.useState)(t),[h,x]=(0,n.useState)(r);return(0,o.useRouter)(),(0,s.jsxs)("div",{className:"bg-white shadow-lg rounded-lg p-8 w-full md:max-w-xl max-w-xs",children:[(0,s.jsxs)("div",{className:"mb-4 w-full",children:[(0,s.jsx)("label",{className:"block text-lg font-semibold mb-2 w-full",children:"Date Reservation"}),(0,s.jsx)(d.A,{selectedDate:h,setSelectedDate:x})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{className:"block text-lg font-semibold mb-2",children:"Massage Shop"}),(0,s.jsxs)("select",{className:"w-full rounded-lg p-3 bg-gray-100 text-gray-700 hover:cursor-pointer",value:u,onChange:e=>p(e.target.value),children:[(0,s.jsx)("option",{value:"",disabled:!0,children:"Select Massage Shop"}),l.map(e=>(0,s.jsx)("option",{value:e._id,children:e.name},e._id))]})]}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)("button",{onClick:a,className:"w-full bg-gray-800 text-white py-3 rounded-lg font-semibold text-lg hover:bg-gray-700 hover:cursor-pointer transition",children:"Cancel"}),(0,s.jsx)("button",{onClick:()=>{if(!u||!h){alert("Please select a shop and a date.");return}console.log("Before update - Shop ID:",u,"Date:",h),i(e,{massageShopId:u,reserveDate:h.format("YYYY-MM-DD")}),console.log("Updated data passed to onUpdate:",{massageShopId:u,reserveDate:h.format("YYYY-MM-DD")}),a()},className:"w-full bg-green-600 text-white py-3 rounded-lg font-semibold text-lg hover:bg-green-500 hover:cursor-pointer transition",children:"Update"})]})]})}async function u({reservationId:e,massageShopId:t,reserveDate:r,token:s}){try{let n=await fetch(`https://antony-massage-backend-production.up.railway.app/api/v1/reservations/${e}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({reserveDate:r,massageShop:t})}),o=await n.text();if(!n.ok)throw console.error("API Error:",o),Error("Update reservation failed");return JSON.parse(o)}catch(e){throw e}}r(96515);var p=r(85668),h=r.n(p),x=r(71953),m=r(55218);function f(){let[e,t]=(0,n.useState)([]),[r,d]=(0,n.useState)(!0),[p,f]=(0,n.useState)(""),[g,v]=(0,n.useState)(null),[b,y]=(0,n.useState)(null),[j,w]=(0,n.useState)(null),[N,P]=(0,n.useState)(!1),[k,S]=(0,n.useState)(!1),[A,C]=(0,n.useState)(null);(0,o.useRouter)();let D=(e,t,r)=>{v(e),y(t),w(h()(r))},E=e=>{S(!0),C(e)},M=async()=>{if(null!=A)try{let e=localStorage.getItem("token");await l(A,e||""),S(!1),C(null);let r=await i();alert("Delete Reservation successful!"),t(r||[])}catch(e){console.error("Error deleting reservation:",e)}},_=async(e,r)=>{try{let s=localStorage.getItem("token");await u({reservationId:e,...r,token:s||""});let n=await i();alert("Update Reservation successful!"),t(n||[]),v(null)}catch(e){console.error("Error updating reservation:",e)}};return r?(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center h-screen space-y-4",children:[(0,s.jsx)(x.A,{sx:{color:"rgb(220, 38, 38)"},size:60,thickness:5}),(0,s.jsx)("p",{className:"text-lg font-semibold text-gray-600",children:"Loading..."})]}):(0,s.jsxs)("div",{className:"flex flex-col items-center p-10 w-full pt-20 md:pt-10",children:[(0,s.jsx)("div",{className:"w-full max-w-4xl space-y-4 mt-15",children:e.length>0?e.map(e=>(0,s.jsx)(a,{reserve:e,onEdit:()=>D(e._id,e.massageShop._id,e.reserveDate),onDelete:()=>E(e._id),isAdmin:N},e._id)):(0,s.jsx)("p",{className:"text-center text-gray-600 text-lg",children:N?"Don't have any reservations.":"You don't have any reservations."})}),g&&b&&j&&(0,s.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-[rgba(0,0,0,0.5)]",children:(0,s.jsx)(c,{reservationId:g,reservationShopId:b,reservationDate:j,onClose:()=>{v(null),y(null),w(null)},onUpdate:_})}),k&&(0,s.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-[rgba(0,0,0,0.5)]",children:(0,s.jsx)(m.A,{onClose:()=>{S(!1),C(null)},onDelete:M,title:"Are you sure you want to delete this reservation?"})})]})}},43033:(e,t,r)=>{Promise.resolve().then(r.bind(r,7527))},47367:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r(16189);function n(){let e=(0,s.useRouter)();return t=>{localStorage.removeItem("user"),localStorage.removeItem("token"),t&&t(),e.push("/")}}},52893:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,86346,23)),Promise.resolve().then(r.t.bind(r,27924,23)),Promise.resolve().then(r.t.bind(r,35656,23)),Promise.resolve().then(r.t.bind(r,40099,23)),Promise.resolve().then(r.t.bind(r,38243,23)),Promise.resolve().then(r.t.bind(r,28827,23)),Promise.resolve().then(r.t.bind(r,62763,23)),Promise.resolve().then(r.t.bind(r,97173,23))},55218:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r(60687);function n({onClose:e,onDelete:t,title:r}){return(0,s.jsxs)("div",{className:"bg-white shadow-lg rounded-lg p-8 w-full md:max-w-xl max-w-xs",children:[(0,s.jsx)("div",{className:"mb-4 w-full",children:(0,s.jsx)("label",{className:"block text-lg font-semibold mb-2 w-full text-center",children:r})}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)("button",{onClick:e,className:"w-full bg-gray-800 text-white py-3 rounded-lg font-semibold text-lg hover:bg-gray-700 hover:cursor-pointer transition",children:"Cancel"}),(0,s.jsx)("button",{onClick:t,className:"w-full bg-red-600 text-white py-3 rounded-lg font-semibold text-lg hover:bg-red-500 hover:cursor-pointer transition",children:"Delete"})]})]})}},57629:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,16444,23)),Promise.resolve().then(r.t.bind(r,16042,23)),Promise.resolve().then(r.t.bind(r,88170,23)),Promise.resolve().then(r.t.bind(r,49477,23)),Promise.resolve().then(r.t.bind(r,29345,23)),Promise.resolve().then(r.t.bind(r,12089,23)),Promise.resolve().then(r.t.bind(r,46577,23)),Promise.resolve().then(r.t.bind(r,31307,23))},58070:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\Gun\\\\Desktop\\\\FE\\\\fe-project-2024-2-antony\\\\src\\\\app\\\\(page)\\\\myreservation\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\Gun\\Desktop\\FE\\fe-project-2024-2-antony\\src\\app\\(page)\\myreservation\\page.tsx","default")},61135:()=>{},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},63181:(e,t,r)=>{Promise.resolve().then(r.bind(r,58070))},70440:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var s=r(31658);let n=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,s.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},77853:()=>{},79481:(e,t,r)=>{Promise.resolve().then(r.bind(r,22332))},79551:e=>{"use strict";e.exports=require("url")},82589:()=>{},86094:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>a.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d});var s=r(65239),n=r(48088),o=r(88170),a=r.n(o),i=r(30893),l={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);r.d(t,l);let d={children:["",{children:["(page)",{children:["myreservation",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,58070)),"C:\\Users\\Gun\\Desktop\\FE\\fe-project-2024-2-antony\\src\\app\\(page)\\myreservation\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,87158)),"C:\\Users\\Gun\\Desktop\\FE\\fe-project-2024-2-antony\\src\\app\\(page)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,94431)),"C:\\Users\\Gun\\Desktop\\FE\\fe-project-2024-2-antony\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["C:\\Users\\Gun\\Desktop\\FE\\fe-project-2024-2-antony\\src\\app\\(page)\\myreservation\\page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:n.RouteKind.APP_PAGE,page:"/(page)/myreservation/page",pathname:"/myreservation",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},87158:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var s=r(37413),n=r(7527);function o({children:e}){return(0,s.jsxs)("div",{children:[(0,s.jsx)(n.default,{}),(0,s.jsx)("div",{className:"md:pl-70 min-h-screen",children:e})]})}},94431:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i,metadata:()=>a});var s=r(37413);r(61135);var n=r(9238),o=r.n(n);let a={title:"Antony Massage",description:"Generated by create next app",icons:{icon:"/image/favicon.ico"}};function i({children:e}){return(0,s.jsx)("html",{lang:"en",children:(0,s.jsx)("body",{className:o().className,children:e})})}},96515:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=async()=>{let e=await fetch("https://antony-massage-backend-production.up.railway.app/api/v1/massage-shops");if(!e.ok)throw Error("Failed to fetch shops");return await e.json()}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[447,372,934,130,645,158],()=>r(86094));module.exports=s})();