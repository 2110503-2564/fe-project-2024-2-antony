(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[211],{1154:(e,t,s)=>{Promise.resolve().then(s.bind(s,4690))},4690:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});var l=s(5155),r=s(6766),a=s(2115),n=s(5695);function i(e){let{user:t,onClose:s,onUpdate:r}=e,[n,i]=(0,a.useState)(t.name||""),[o,c]=(0,a.useState)(t.username||""),[d,u]=(0,a.useState)(t.tel||"");return(0,l.jsxs)("div",{className:"bg-white shadow-lg rounded-lg p-8 w-full md:max-w-xl max-w-xs",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold mb-4 text-center",children:"Edit Profile"}),(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("label",{className:"block text-lg font-semibold mb-2",children:"Name"}),(0,l.jsx)("input",{type:"text",className:"w-full rounded-lg p-3 bg-gray-100 text-gray-700",value:n,onChange:e=>i(e.target.value)})]}),(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("label",{className:"block text-lg font-semibold mb-2",children:"Username"}),(0,l.jsx)("input",{type:"text",className:"w-full rounded-lg p-3 bg-gray-100 text-gray-700",value:o,onChange:e=>c(e.target.value)})]}),(0,l.jsxs)("div",{className:"mb-6",children:[(0,l.jsx)("label",{className:"block text-lg font-semibold mb-2",children:"Telephone"}),(0,l.jsx)("input",{type:"text",className:"w-full rounded-lg p-3 bg-gray-100 text-gray-700",value:d,onChange:e=>u(e.target.value)})]}),(0,l.jsxs)("div",{className:"flex gap-4",children:[(0,l.jsx)("button",{onClick:s,className:"w-full bg-gray-800 text-white py-3 rounded-lg font-semibold text-lg hover:bg-gray-700 hover:cursor-pointer transition",children:"Cancel"}),(0,l.jsx)("button",{onClick:()=>{r({name:n,username:o,tel:d}),s()},className:"w-full bg-green-600 text-white py-3 rounded-lg font-semibold text-lg hover:bg-green-500 hover:cursor-pointer transition",children:"Save"})]})]})}var o=s(4835);async function c(e,t){try{let s=await fetch("https://antony-massage-backend-production.up.railway.app/api/v1/users/".concat(e._id),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({name:e.name,username:e.username,email:e.email,tel:e.tel})});if(!s.ok)throw Error("Failed to update user");return await s.json()}catch(e){console.error("Error updating user:",e)}}var d=s(9355);function u(){let[e,t]=(0,a.useState)(null),s=(0,n.useRouter)(),[u,m]=(0,a.useState)(!1),[g,x]=(0,a.useState)(!1),h=(0,d.A)();if((0,a.useEffect)(()=>{if(!localStorage.getItem("token")){s.push("/login");return}try{let e=localStorage.getItem("user");if(e){let s=JSON.parse(e);t(s)}}catch(e){console.error("Error loading user from localStorage",e)}},[s]),!e)return(0,l.jsx)("div",{className:"text-center pt-20",children:"Loading..."});let p=async s=>{try{let l=localStorage.getItem("token"),r={...e,...s};await c(r,l)&&(alert("Update user successful!"),localStorage.setItem("user",JSON.stringify(r)),t(r))}catch(e){alert("Error updating user:"+e)}};return(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-white pt-20 md:pt-16 mt-10 md:mt-0",children:[(0,l.jsxs)("div",{className:"bg-white rounded-lg p-8 w-full max-w-2xl",children:[(0,l.jsx)("div",{className:"flex items-center justify-center mb-6",children:(0,l.jsx)(r.default,{src:"/image/antony.jpg",alt:"Profile Picture",width:100,height:100,className:"rounded-full"})}),(0,l.jsx)("h1",{className:"text-2xl font-bold text-center mb-4",children:e.name}),(0,l.jsxs)("div",{className:"space-y-4 text-gray-700",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-semibold pb-2",children:"Email"}),(0,l.jsx)("p",{className:"bg-gray-100 rounded-lg p-2",children:e.email})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-semibold pb-2",children:"Username"}),(0,l.jsx)("p",{className:"bg-gray-100 rounded-lg p-2",children:e.username?e.username:"Antony"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-semibold pb-2",children:"Telephone"}),(0,l.jsx)("p",{className:"bg-gray-100 rounded-lg p-2",children:e.tel})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-semibold pb-2",children:"Role"}),(0,l.jsx)("p",{className:"bg-gray-100 rounded-lg p-2",children:e.role})]}),(0,l.jsxs)("div",{className:"pt-4",children:[(0,l.jsx)("button",{onClick:()=>m(!0),className:"w-full bg-gray-900 text-white py-3 rounded-lg font-semibold text-lg hover:bg-gray-800 transition hover:cursor-pointer",children:"Edit profile"}),(0,l.jsx)("div",{className:"w-full pb-4 mt-3",children:(0,l.jsx)("button",{onClick:()=>{h(()=>x(!1))},className:"w-full flex items-center justify-center p-3 border border-red-600 text-red-600 rounded-lg hover:bg-red-100 hover:cursor-pointer transition-colors",children:(0,l.jsxs)("div",{className:"flex items-center justify-between w-20 text-lg",children:[(0,l.jsx)("span",{children:"Logout"}),(0,l.jsx)(o.A,{size:18})]})})})]})]})]}),u&&e&&(0,l.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-[rgba(0,0,0,0.5)] z-50",children:(0,l.jsx)(i,{user:e,onClose:()=>m(!1),onUpdate:e=>{p(e)}})})]})}},9355:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var l=s(5695);function r(){let e=(0,l.useRouter)();return t=>{localStorage.removeItem("user"),localStorage.removeItem("token"),t&&t(),e.push("/")}}}},e=>{var t=t=>e(e.s=t);e.O(0,[954,441,684,358],()=>t(1154)),_N_E=e.O()}]);