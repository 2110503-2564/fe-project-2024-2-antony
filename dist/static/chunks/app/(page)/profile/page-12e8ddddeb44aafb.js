(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[211],{1154:(e,t,l)=>{Promise.resolve().then(l.bind(l,4690))},4690:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>c});var s=l(5155),a=l(6766),r=l(2115),n=l(5695);function i(e){let{user:t,onClose:l,onUpdate:a}=e,[n,i]=(0,r.useState)(t.name||""),[o,c]=(0,r.useState)(t.username||""),[d,u]=(0,r.useState)(t.tel||"");return(0,s.jsxs)("div",{className:"bg-white shadow-lg rounded-lg p-8 w-full max-w-xl",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-4 text-center",children:"Edit Profile"}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-lg font-semibold mb-2",children:"Name"}),(0,s.jsx)("input",{type:"text",className:"w-full rounded-lg p-3 bg-gray-100 text-gray-700",value:n,onChange:e=>i(e.target.value)})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-lg font-semibold mb-2",children:"Username"}),(0,s.jsx)("input",{type:"text",className:"w-full rounded-lg p-3 bg-gray-100 text-gray-700",value:o,onChange:e=>c(e.target.value)})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{className:"block text-lg font-semibold mb-2",children:"Telephone"}),(0,s.jsx)("input",{type:"text",className:"w-full rounded-lg p-3 bg-gray-100 text-gray-700",value:d,onChange:e=>u(e.target.value)})]}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)("button",{onClick:l,className:"w-full bg-gray-800 text-white py-3 rounded-lg font-semibold text-lg hover:bg-gray-700 hover:cursor-pointer transition",children:"Cancel"}),(0,s.jsx)("button",{onClick:()=>{a({name:n,username:o,tel:d}),l()},className:"w-full bg-green-600 text-white py-3 rounded-lg font-semibold text-lg hover:bg-green-500 hover:cursor-pointer transition",children:"Save"})]})]})}async function o(e,t){try{let l=await fetch("https://antony-massage-backend-production.up.railway.app/api/v1/users/".concat(e._id),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({name:e.name,username:e.username,email:e.email,tel:e.tel})});if(!l.ok)throw Error("Failed to update user");return await l.json()}catch(e){console.error("Error updating user:",e)}}function c(){let[e,t]=(0,r.useState)(null),l=(0,n.useRouter)(),[c,d]=(0,r.useState)(!1);if((0,r.useEffect)(()=>{if(!localStorage.getItem("token")){l.push("/login");return}try{let e=localStorage.getItem("user");if(e){let l=JSON.parse(e);t(l)}}catch(e){console.error("Error loading user from localStorage",e)}},[l]),!e)return(0,s.jsx)("div",{className:"text-center pt-20",children:"Loading..."});let u=async l=>{try{let s=localStorage.getItem("token"),a={...e,...l};await o(a,s)&&(alert("Update user successful!"),localStorage.setItem("user",JSON.stringify(a)),t(a))}catch(e){alert("Error updating user:"+e)}};return(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-white pt-15",children:[(0,s.jsxs)("div",{className:"bg-white rounded-lg p-8 w-full max-w-2xl",children:[(0,s.jsx)("div",{className:"flex items-center justify-center mb-6",children:(0,s.jsx)(a.default,{src:"/image/antony.jpg",alt:"Profile Picture",width:100,height:100,className:"rounded-full"})}),(0,s.jsx)("h1",{className:"text-2xl font-bold text-center mb-4",children:e.name}),(0,s.jsxs)("div",{className:"space-y-4 text-gray-700",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-semibold pb-2",children:"Email"}),(0,s.jsx)("p",{className:"bg-gray-100 rounded-lg p-2",children:e.email})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-semibold pb-2",children:"Username"}),(0,s.jsx)("p",{className:"bg-gray-100 rounded-lg p-2",children:e.username?e.username:"Antony"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-semibold pb-2",children:"Telephone"}),(0,s.jsx)("p",{className:"bg-gray-100 rounded-lg p-2",children:e.tel})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-semibold pb-2",children:"Role"}),(0,s.jsx)("p",{className:"bg-gray-100 rounded-lg p-2",children:e.role})]}),(0,s.jsx)("div",{className:"pt-4",children:(0,s.jsx)("button",{onClick:()=>d(!0),className:"w-full bg-gray-900 text-white py-3 rounded-lg font-semibold text-lg hover:bg-gray-800 transition hover:cursor-pointer",children:"Edit profile"})})]})]}),c&&e&&(0,s.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-[rgba(0,0,0,0.5)] z-50",children:(0,s.jsx)(i,{user:e,onClose:()=>d(!1),onUpdate:e=>{u(e)}})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[212,441,684,358],()=>t(1154)),_N_E=e.O()}]);