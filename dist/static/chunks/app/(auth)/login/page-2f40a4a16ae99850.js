(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[72],{2382:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var r=a(5155),s=a(2115),n=a(5695);async function o(e,t){try{let a=await fetch("https://antony-massage-backend-production.up.railway.app/api/v1/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({identifier:e,password:t})}),r=await a.json();if(!a.ok)throw Error("Login failed: ".concat(r.message||"Unknown error"));let s=r.token;localStorage.setItem("token",s);let n=await fetch("https://antony-massage-backend-production.up.railway.app/api/v1/auth/me",{headers:{Authorization:"Bearer ".concat(s)}}),o=await n.json();if(!n.ok)throw Error("Failed to fetch user data: ".concat(o.message||"Unknown error"));return localStorage.setItem("user",JSON.stringify(o.data)),console.log("User data:",o.data),o}catch(e){console.error("Error during login or fetching user info:",e)}}function l(){let[e,t]=(0,s.useState)(""),[a,l]=(0,s.useState)(""),[c,i]=(0,s.useState)(""),[u,d]=(0,s.useState)(null),m=(0,n.useRouter)(),h=async()=>{let t=await o(e,a);d(t),t&&m.push("/")};return(0,s.useEffect)(()=>{localStorage.getItem("token")&&m.push("/")},[]),(0,r.jsx)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-100",children:(0,r.jsxs)("div",{className:"bg-white shadow-lg rounded-lg p-8 w-[200%] md:max-w-md max-w-xs",children:[(0,r.jsxs)("h1",{className:"text-3xl font-bold text-center mb-4",children:[(0,r.jsx)("span",{className:"text-red-600",children:"Antony"})," ",(0,r.jsx)("span",{className:"text-gray-900",children:"Massage"})]}),(0,r.jsx)("h2",{className:"text-2xl font-semibold text-center text-gray-700 mb-6",children:"Login"}),c&&(0,r.jsx)("p",{className:"text-red-600 text-sm text-center mb-4",children:c}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Email / Username"}),(0,r.jsx)("input",{type:"text",placeholder:"Enter your email or username",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 text-gray-700",onChange:e=>t(e.target.value)})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Password"}),(0,r.jsx)("input",{type:"password",placeholder:"Enter your password",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 text-gray-700",onChange:e=>l(e.target.value)})]}),(0,r.jsx)("button",{onClick:h,className:"hover:cursor-pointer w-full bg-red-600 text-white py-3 rounded-lg font-semibold text-lg hover:bg-red-700 transition",children:"Login"}),(0,r.jsx)("div",{className:"mt-6 text-center",children:(0,r.jsxs)("p",{className:"text-gray-600",children:["Donâ€™t have an account?"," ",(0,r.jsx)("a",{href:"/register",className:"text-red-600 hover:underline font-medium",children:"Register"})]})})]})})}},5695:(e,t,a)=>{"use strict";var r=a(8999);a.o(r,"usePathname")&&a.d(t,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}}),a.o(r,"useSearchParams")&&a.d(t,{useSearchParams:function(){return r.useSearchParams}})},9891:(e,t,a)=>{Promise.resolve().then(a.bind(a,2382))}},e=>{var t=t=>e(e.s=t);e.O(0,[441,684,358],()=>t(9891)),_N_E=e.O()}]);